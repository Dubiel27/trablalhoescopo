<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Manipulação de Variável Global em Modo Escuro</title>
    <style>
        /* Cores Base para o Dark Mode (Estilo Wikipédia) */
        :root {
            --bg-principal: #1c1c1e;
            --bg-conteudo: #2c2c2e;
            --texto-principal: #dcdcdc;
            --texto-secundario: #a0a0a0;
            --borda: #404040;
            --link: #7ec2ff;
            --bg-code: #3a3a3c;
            --texto-code: #ff9999;
            --cor-alerta: #ffb74d; /* Laranja para o perigo da Global */
            --cor-erro: #ff6347;
        }

        /* 1. Estilos Gerais e Layout Dark Mode */
        body {
            font-family: sans-serif;
            background-color: var(--bg-principal);
            color: var(--texto-principal);
            margin: 0;
            padding: 0;
        }

        a {
            color: var(--link);
            text-decoration: none;
        }

        .content {
            max-width: 900px;
            margin: 20px auto;
            background-color: var(--bg-conteudo);
            padding: 25px 30px;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.4);
        }

        .page-title {
            font-size: 2em;
            font-weight: normal;
            margin-bottom: 10px;
            padding-bottom: 5px;
            border-bottom: 1px solid var(--borda);
            color: var(--texto-principal);
        }
        
        .content h2 {
            font-size: 1.5em;
            border-bottom: 1px solid var(--borda);
            padding-bottom: 3px;
            margin-top: 30px;
            color: var(--texto-secundario);
        }

        /* 2. Estilo para o Bloco de Demonstração */
        .demo-output {
            background-color: var(--bg-code);
            border: 1px solid var(--borda);
            padding: 15px;
            margin: 20px 0;
            border-radius: 5px;
        }

        .output-line {
            font-family: monospace;
            margin-bottom: 5px;
        }

        .status-global-antes { color: var(--texto-principal); }
        .status-local-dentro { color: var(--link); }
        .status-global-depois { color: var(--cor-alerta); font-weight: bold; }
        .status-aviso { color: var(--cor-erro); }
        
        code {
            background-color: #3a3a3c;
            color: var(--texto-code);
            padding: 2px 4px;
            border-radius: 3px;
            font-family: monospace;
        }
        
        pre {
            background-color: #0d0d0e;
            color: var(--texto-principal);
            padding: 10px;
            border-radius: 5px;
            overflow-x: auto;
        }
    </style>
</head>
<body>

    <div class="content">
        <h1 class="page-title">Manipulação Direta de Variável Global (JavaScript)</h1>
        <p>De <a href="#">Wikipédia</a>, a enciclopédia livre.</p>
        
        <p>Este exemplo demonstra como uma função **pode** modificar uma variável global, alterando seu valor permanentemente para o resto do programa. Isso é geralmente considerado uma má prática, pois torna o código imprevisível.</p>
        
        <h2>Estrutura do Código:</h2>
        
        <pre>
let contador = 10; // Variável GLOBAL

function resetarContador() {
    // ⚠️ Acessamos o objeto global (window) para forçar a modificação da variável GLOBAL.
    window.contador = 0; 

    // Tentativa de criar uma variável local, que não é acessível fora.
    let mensagemLocal = "Reset concluído DENTRO da função."; 

    console.log("--- DENTRO DA FUNÇÃO ---");
    console.log("1. Novo valor do contador (GLOBAL MODIFICADO):", window.contador);
    console.log("2. Mensagem LOCAL:", mensagemLocal);
}

// ----------------------------------------------------
// Execução e Testes
// ----------------------------------------------------

console.log("--- ESCOPO GLOBAL (ANTES) ---");
console.log("A. Valor inicial do contador (GLOBAL):", contador);

resetarContador(); // Chamada da função que modifica a global

console.log("\n--- ESCOPO GLOBAL (DEPOIS) ---");
console.log("B. Valor FINAL do contador (GLOBAL):", contador); // O valor foi alterado!

try {
    // Tenta acessar a variável LOCAL 'mensagemLocal'
    console.log("C. Tentativa de acessar 'mensagemLocal':", mensagemLocal);
} catch (e) {
    console.error("C. ERRO DE ESCOPO: Variável LOCAL não existe aqui.");
}
        </pre>

        <h2>Saída da Demonstração</h2>
        <p>Observe a diferença entre o Ponto A e o Ponto B. O valor de <code>contador</code> foi **permanentemente alterado** pela função.</p>

        <div class="demo-output" id="demo-output">
            </div>
        
        <h2>⚠️ Aviso de Boa Prática</h2>
        <p class="status-aviso">Programar dessa forma é desaconselhável! Acessar diretamente o objeto <code>window</code> (ou usar a palavra-chave <code>global</code> em Python) torna o código difícil de rastrear e depurar. É preferível **passar** a variável como um argumento e **retornar** o novo valor.</p>
        
    </div>

    <script>
        // ----------------------------------------------------
        // Lógica de Execução
        // ----------------------------------------------------

        const outputDiv = document.getElementById('demo-output');
        function displayOutput(text, type = 'global') {
            const line = document.createElement('div');
            line.className = `output-line status-${type}`;
            line.innerHTML = text;
            outputDiv.appendChild(line);
        }

        // Variável GLOBAL
        let contador = 10; 

        function resetarContador() {
            // MANIPULAÇÃO DIRETA DA GLOBAL
            window.contador = 0; 
            let mensagemLocal = "Reset concluído DENTRO da função."; 

            displayOutput("--- DENTRO DA FUNÇÃO ---");
            displayOutput(`1. Novo valor do contador (GLOBAL MODIFICADO): <code>${window.contador}</code>`, 'status-local-dentro'); 
            displayOutput(`2. Mensagem LOCAL: <code>${mensagemLocal}</code>`, 'status-local-dentro');
        }

        // ----------------------------------------------------
        // Testes no Escopo Global
        // ----------------------------------------------------

        displayOutput("--- ESCOPO GLOBAL (ANTES) ---");
        // A. Valor inicial da global
        displayOutput(`A. Valor inicial do contador (GLOBAL): <code>${contador}</code>`, 'status-global-antes');

        resetarContador(); // AQUI OCORRE A MODIFICAÇÃO GLOBAL

        displayOutput("--- ESCOPO GLOBAL (DEPOIS) ---");
        // B. Valor final da global (agora é 0)
        displayOutput(`B. Valor FINAL do contador (GLOBAL): <code>${contador}</code>`, 'status-global-depois');

        try {
            // C. Tenta acessar a variável LOCAL, que falha
            displayOutput(`C. Tentativa de acessar 'mensagemLocal': <span class="status-aviso">ERRO! Não acessível.</span>`);
            console.log("C. Tentativa de acessar 'mensagemLocal':", mensagemLocal); 
        } catch (e) {
            displayOutput(`C. ERRO DE ESCOPO: ${e.name}. Variável LOCAL encapsulada.`, 'status-aviso');
            console.error("C. ERRO DE ESCOPO:", e.name, "— Variável LOCAL encapsulada.");
        }
    </script>

</body>
</html>